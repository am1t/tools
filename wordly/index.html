<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wordly - Count Characters, Words & Lines</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #030222;
            color: #f9bf77;
            min-height: 100vh;
            padding: 2rem 1rem;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .description {
            text-align: center;
            margin-bottom: 2rem;
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .tool-card {
            background: #F0ECDB;
            color: #222;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: #fff;
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .stat-label {
            font-size: 0.875rem;
            color: #666;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #D64132;
        }

        textarea {
            width: 100%;
            min-height: 300px;
            padding: 1rem;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            font-size: 1rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            resize: vertical;
            transition: border-color 0.2s ease;
            line-height: 1.5;
        }

        textarea:focus {
            outline: none;
            border-color: #D64132;
        }

        .actions {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        button {
            padding: 0.75rem 1.5rem;
            background: #D64132;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.2s ease, transform 0.1s ease;
            font-family: inherit;
        }

        button:hover {
            background: #b83629;
        }

        button:active {
            transform: scale(0.98);
        }

        .back-link {
            display: block;
            margin-top: 1.5rem;
            color: #D64132;
            text-decoration: none;
            font-size: 1rem;
            text-align: center;
            transition: opacity 0.2s ease;
        }

        .back-link:hover {
            opacity: 0.8;
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 2rem;
            }

            .tool-card {
                padding: 1.5rem;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            textarea {
                min-height: 250px;
            }

            .actions {
                flex-direction: column;
            }

            button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìä Wordly</h1>
        <p class="description">Count characters, words, and lines in real-time (automatically strips HTML & Markdown)</p>

        <div class="tool-card">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Characters</div>
                    <div class="stat-value" id="charCount">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">No Spaces</div>
                    <div class="stat-value" id="charNoSpaceCount">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Words</div>
                    <div class="stat-value" id="wordCount">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Lines</div>
                    <div class="stat-value" id="lineCount">0</div>
                </div>
            </div>

            <textarea
                id="textInput"
                placeholder="Start typing or paste your text here..."
                autofocus
            ></textarea>

            <div class="actions">
                <button onclick="clearText()">Clear Text</button>
                <button onclick="copyStats(event)">Copy Stats</button>
            </div>

            <a href="/" class="back-link">‚Üê Back to Tools</a>
        </div>
    </div>

    <script>
        const textInput = document.getElementById('textInput');
        const charCount = document.getElementById('charCount');
        const charNoSpaceCount = document.getElementById('charNoSpaceCount');
        const wordCount = document.getElementById('wordCount');
        const lineCount = document.getElementById('lineCount');

        function stripHtmlAndMarkdown(text) {
            let cleanText = text;

            // Strip HTML tags
            cleanText = cleanText.replace(/<[^>]*>/g, '');

            // Strip Markdown formatting
            // Headers (# ## ###)
            cleanText = cleanText.replace(/^#{1,6}\s+/gm, '');

            // Bold and italic (**text** __text__ *text* _text_)
            cleanText = cleanText.replace(/(\*\*|__)(.*?)\1/g, '$2');
            cleanText = cleanText.replace(/(\*|_)(.*?)\1/g, '$2');

            // Links [text](url)
            cleanText = cleanText.replace(/\[([^\]]+)\]\([^\)]+\)/g, '$1');

            // Images ![alt](url)
            cleanText = cleanText.replace(/!\[([^\]]*)\]\([^\)]+\)/g, '$1');

            // Inline code `code`
            cleanText = cleanText.replace(/`([^`]+)`/g, '$1');

            // Code blocks ```code```
            cleanText = cleanText.replace(/```[\s\S]*?```/g, '');

            // Blockquotes
            cleanText = cleanText.replace(/^>\s+/gm, '');

            // Horizontal rules
            cleanText = cleanText.replace(/^(-{3,}|\*{3,}|_{3,})$/gm, '');

            // List markers (-, *, +, 1.)
            cleanText = cleanText.replace(/^[\s]*[-*+]\s+/gm, '');
            cleanText = cleanText.replace(/^[\s]*\d+\.\s+/gm, '');

            // Strikethrough ~~text~~
            cleanText = cleanText.replace(/~~(.*?)~~/g, '$1');

            return cleanText;
        }

        function updateCounts() {
            const text = textInput.value;

            // Strip HTML and Markdown for counting
            const cleanText = stripHtmlAndMarkdown(text);

            // Character count (with spaces, clean text)
            charCount.textContent = cleanText.length.toLocaleString();

            // Character count (without spaces, clean text)
            const noSpaces = cleanText.replace(/\s/g, '');
            charNoSpaceCount.textContent = noSpaces.length.toLocaleString();

            // Word count (clean text)
            const words = cleanText.trim().split(/\s+/).filter(word => word.length > 0);
            wordCount.textContent = words.length.toLocaleString();

            // Line count (original text)
            const lines = text.split('\n').length;
            lineCount.textContent = lines.toLocaleString();
        }

        function clearText() {
            textInput.value = '';
            updateCounts();
            textInput.focus();
        }

        function copyStats(event) {
            const stats = `Characters: ${charCount.textContent}
Characters (no spaces): ${charNoSpaceCount.textContent}
Words: ${wordCount.textContent}
Lines: ${lineCount.textContent}`;

            navigator.clipboard.writeText(stats).then(() => {
                const button = event.target;
                const originalText = button.textContent;
                button.textContent = 'Copied!';
                setTimeout(() => {
                    button.textContent = originalText;
                }, 2000);
            }).catch(err => {
                alert('Failed to copy stats to clipboard');
            });
        }

        // Update counts on input
        textInput.addEventListener('input', updateCounts);

        // Initial count (in case there's pre-filled text)
        updateCounts();
    </script>
</body>
</html>
